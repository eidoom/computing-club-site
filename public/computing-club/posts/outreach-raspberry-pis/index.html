<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Outreach Raspberry Pis :: Computing Club</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Setting up a new Pi for the Galton exhibit" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/posts/outreach-raspberry-pis/" />




<link rel="stylesheet" href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/assets/style.css">



<link rel="stylesheet" href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/style.css">


<link rel="apple-touch-icon" href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Outreach Raspberry Pis">
<meta property="og:description" content="Setting up a new Pi for the Galton exhibit" />
<meta property="og:url" content="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/posts/outreach-raspberry-pis/" />
<meta property="og:site_name" content="Computing Club" />

  <meta property="og:image" content="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/img/galton-pi-install.jpg">

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2019-10-29 19:26:34 &#43;0000 UTC" />











</head>
<body class="orange">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/">
  <div class="logo">
    Computing Club
  </div>
</a>

    </div>
    
      <div class="menu-trigger">menu</div>
    
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/computing-club/about">About</a></li>
        
      
        
          <li><a href="/computing-club/list-tags">Browse</a></li>
        
      
        
          <li><a href="/computing-club/posts">Informal</a></li>
        
      
        
          <li><a href="/computing-club/sessions">Sessions</a></li>
        
      
        
          <li><a href="/computing-club/topics">Topics</a></li>
        
      
        
          <li><a href="/computing-club/updates">Updates</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/computing-club/about">About</a></li>
      
    
      
        <li><a href="/computing-club/list-tags">Browse</a></li>
      
    
      
        <li><a href="/computing-club/posts">Informal</a></li>
      
    
      
        <li><a href="/computing-club/sessions">Sessions</a></li>
      
    
      
        <li><a href="/computing-club/topics">Topics</a></li>
      
    
      
        <li><a href="/computing-club/updates">Updates</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">

		<h1 class="post-title">
		Outreach Raspberry Pis
	</h1>

		<div class="post-meta">
		
		<span class="post-date">
			29 Oct 2019
		</span>
		
		
		
			
			<span class="post-author">::
				<a href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/authors/ryan-moodie/">Ryan Moodie</a>
			</span>
			
		
		
		
	</div>

	
	<span class="post-tags">
		
		#<a href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/tags/outreach/">outreach</a>&nbsp;
		
		#<a href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/tags/galton-board/">galton-board</a>&nbsp;
		
		#<a href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/tags/raspberry-pi/">raspberry-pi</a>&nbsp;
		
		#<a href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/tags/nuodyssey/">nuodyssey</a>&nbsp;
		
		#<a href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/tags/python/">python</a>&nbsp;
		
		#<a href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/tags/linux/">linux</a>&nbsp;
		
	</span>
	


	
	<img src="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/img/galton-pi-install.jpg" class="post-cover" />
	


		<div class="post-content">
		<p>Today was the first day of Celebrate Science 2019.
Whilst taking a break from running our exhibit, I had a look at our Pis.</p>
<h3 id="meet-the-pis">Meet the Pis</h3>
<p>There are nine in total.</p>
<p>Four have stands in the horizontal/landscape configuration.
Yesterday, <a href="../../author/henry-truong/">Henry</a> and I found that three of these run the <a href="https://ghostsintheuniverse.org/nuodyssey/">NuOdyssey game</a> locally.
Apparently it was written by somebody called <a href="https://xikka.com/about">Sunil</a>, anybody know that story?
You just start the browser which automatically brings up the game as its starting page.</p>
<p>The fourth horizontal one, which is visually distinguishable from the others, runs the Galton server: you interface the Pi with the Galton board via USB and it records balls passing through the light gates.
I found that this all worked: it recorded the physical Galton board and graphed the results in realtime.
The Galton server Pi has also been set up to remotely control the other Pis.
It has scripts to remotely shutdown, reboot, and start and stop simulations.
I found that this was not working, though.</p>
<p>The other five are in the vertical/portrait configuration and run the Galton simulation.
I had noticed that one of these has nothing installed on it, so I installed the Galton simulation software on it.
I decided to record the process here since it would have been <em>very</em> useful for such a resource to exist for me to use!
And also because I&rsquo;m waiting for a Pi to finish updating itself&hellip;</p>
<h3 id="getting-online">Getting online</h3>
<p>Firstly, the Pis don&rsquo;t seem to be able to connect the university wifi, probably because they don&rsquo;t support the security protocol &mdash; maybe something we could fix by installing a new package?
You can, however, log into the wifi network <code>TheCloud@Durham</code> - although you may have to manually navigate to <a href="//service.thecloud.net">//service.thecloud.net</a> to complete login - or plug in an ethernet cable.
Once online, I ran a <code>sudo apt update &amp;&amp; sudo apt -y full-upgrade</code> (then <code>reboot</code>) for good measure.
This took a long time.
Then I ran <code>sudo apt update &amp;&amp; sudo apt install emacs vim</code> to keep everyone happy.</p>
<h3 id="portrait-mode">Portrait mode</h3>
<p>Next, I had to configure the Pi to operate in portrait mode.
The screen can be rotated by</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">echo <span style="color:#e6db74">&#34;echo rotate_display=3 &gt;&gt; /boot/config.txt&#34;</span> | sudo sh
sudo reboot
</code></pre></div><p>which just appends a screen rotation command to the Pi&rsquo;s boot configuration file under sudo privileges and restarts the Pi.
The touchscreen, however, remains configured for a landscape configuration.
To fix this behaviour, I had to persistently adjust the coordinate transformation matrix for the FT5406 touch controller with</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">echo <span style="color:#e6db74">&#34;xinput set-prop &#39;FT5406 memory based driver&#39; &#39;Coordinate Transformation Matrix&#39; 0 -1 1 1 0 0 0 0 1&#34;</span> &gt;&gt; ~/.xsessionrc
sudo reboot
</code></pre></div><p>It took me forever to figure that one out!</p>
<h3 id="getting-the-galton-code-on-the-pi">Getting the Galton code on the Pi</h3>
<p>With all that out of the way, I could move onto installing the Galton software.
I made a folder for git repos</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mkdir ~/git
cd git
</code></pre></div><p>then cloned the GaltonBoard repo</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git clone https://github.com/eidoom/GaltonBoard.git
cd GaltonBoard
</code></pre></div><p>and installed dependancies (recall that <a href="../../author/james-whitehead/">James</a> has updated the software for Python 3)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo apt install python3 python3-numpy python3-matplotlib python3-scipy
</code></pre></div><p>before trying the simulation, <code>./galtonsim</code>, and it worked!</p>
<p>I also automated the installation of the application shortcut to the desktop and application menu (with an icon), which can be run with <code>./install-sim.sh</code>.</p>

	</div>


	<div class="pagination__title">
	<span class="pagination__title-h">
		comments
	</span>
	<hr />
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">

	(function() {
		
		
		if (window.location.hostname == "localhost")
			return;

		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		var disqus_shortname = 'computing-club';
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
	
</script>
<noscript>
	Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<a href="https://disqus.com/" class="dsq-brlink">
	comments powered by <span class="logo-disqus">Disqus</span>
</a>


		
	<div class="pagination">
		<div class="pagination__title">
			<span
			class="pagination__title-h">Read other posts</span>
			<hr />
		</div>
		<div class="pagination__buttons">
			
			<span class="button previous">
				<a href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/posts/outreach-raspberry-pis-2/">
          <span class="button__icon">←</span>
					<span class="button__text">Outreach Raspberry Pis 2</span>
				</a>
			</span>
			
			
			<span class="button next">
				<a href="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/posts/galton/">
					<span class="button__text">Galton board code</span>
          <span class="button__icon">→</span>
				</a>
			</span>
			
		</div>
	</div>
	


</div>

  </div>

  
    <footer class="footer">
	<div class="footer__inner">
		
			<div class="copyright">
				<span><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></span>
				<span>:: <a href=//github.com/eidoom/computing-club-site>Source</a>&nbsp</span>
				<span style="right-margin">::&nbsp<a href='https://www.yumsome.com/wp-content/uploads/2015/05/classic-italian-tomato-sauce-hero.jpg'>Sauce</a>&nbsp</span>
				<span>:: Powered by <a href="//gohugo.io">Hugo</a>&nbsp</span>
				
				<span>:: Themed by <a href=//themes.gohugo.io/hugo-theme-terminal/>terminal</a></span>
			</div>
		</div>
</footer>

<script src="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/assets/main.js"></script>
<script src="https://notes.dmaitre.phyip3.dur.ac.uk/computing-club/assets/prism.js"></script>





  
</div>

</body>
</html>
